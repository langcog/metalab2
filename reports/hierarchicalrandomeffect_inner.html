<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Sho Tsuji and Christina Bergmann" />


<title>Hierarchical Random Effects in Meta-Analyses: Do they change stuff?</title>

<script src="hierarchicalrandomeffect_inner_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="hierarchicalrandomeffect_inner_files/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="hierarchicalrandomeffect_inner_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="hierarchicalrandomeffect_inner_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="hierarchicalrandomeffect_inner_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="hierarchicalrandomeffect_inner_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="hierarchicalrandomeffect_inner_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="hierarchicalrandomeffect_inner_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="hierarchicalrandomeffect_inner_files/navigation-1.1/tabsets.js"></script>
<script src="hierarchicalrandomeffect_inner_files/navigation-1.1/codefolding.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
div.sourceCode {
  overflow-x: visible;
}
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Hierarchical Random Effects in Meta-Analyses: Do they change stuff?</h1>
<h4 class="author"><em>Sho Tsuji and Christina Bergmann</em></h4>
<h4 class="date"><em>Last updated on 2018-08-01.</em></h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Each effect size is nested within an experiment which is in turn nested within a paper (this includes unpublished reports, theses, and the likes). It can be assumed that effect sizes within these nested structures are not independent. Here we explore whether and how accounting for this possible correlation affects both a random effects base model and a moderator analysis. As example we chose InWordDB.</p>
</div>
<div id="base-model" class="section level1">
<h1>Base Model</h1>
<p>Standard random effects model, no moderators. First we run the model without accounting for any hierarchical structure (as reported in the publication by Bergmann &amp; Cristia 2015; note that differences in effect size estimation are due to an updated dataset here that also includes nonnative studies, as compared to the paper).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inworddb &lt;-<span class="st"> </span><span class="kw">droplevels</span>(all_data[all_data<span class="op">$</span>short_name<span class="op">==</span><span class="st">&quot;inworddb&quot;</span>, ])

StandardMod &lt;-<span class="st"> </span><span class="kw">rma</span>(g_calc, g_var_calc, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(StandardMod)</code></pre></div>
<pre><code>## 
## Random-Effects Model (k = 295; tau^2 estimator: REML)
## 
##    logLik   deviance        AIC        BIC       AICc  
## -144.9831   289.9663   293.9663   301.3334   294.0075  
## 
## tau^2 (estimated amount of total heterogeneity): 0.1039 (SE = 0.0117)
## tau (square root of estimated tau^2 value):      0.3223
## I^2 (total heterogeneity / total variability):   77.18%
## H^2 (total variability / sampling variability):  4.38
## 
## Test for Heterogeneity: 
## Q(df = 294) = 1161.6550, p-val &lt; .0001
## 
## Model Results:
## 
## estimate      se    zval    pval   ci.lb   ci.ub     
##   0.2103  0.0220  9.5408  &lt;.0001  0.1671  0.2535  ***
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div id="two-level-model-paper" class="section level2">
<h2>Two Level Model: Paper</h2>
<p>We first add a level for the paper a given effect size was reported in. These effect sizes presumably stem from a batch of studies that were conducted in the same lab in a very similar fashion and by the same set of experimenters, introducing possible correlations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PerPaperMod &lt;-<span class="st"> </span><span class="kw">rma.mv</span>(g_calc, g_var_calc, <span class="dt">random =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>short_cite, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(PerPaperMod)</code></pre></div>
<pre><code>## 
## Multivariate Meta-Analysis Model (k = 295; method: REML)
## 
##    logLik   Deviance        AIC        BIC       AICc  
## -270.3941   540.7882   544.7882   552.1553   544.8294  
## 
## Variance Components: 
## 
##             estim    sqrt  nlvls  fixed      factor
## sigma^2    0.0346  0.1860     66     no  short_cite
## 
## Test for Heterogeneity: 
## Q(df = 294) = 1161.6550, p-val &lt; .0001
## 
## Model Results:
## 
## estimate      se    zval    pval   ci.lb   ci.ub     
##   0.1815  0.0259  7.0003  &lt;.0001  0.1307  0.2324  ***
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="three-level-model-paper-and-experiment" class="section level2">
<h2>Three Level Model: Paper and Experiment</h2>
<p>Nested within paper, we introduce a level for experiment number. Experiments can report several effect sizes, for example when infants are run in conditions; slight variations of the same study which are presumed to be even more similar than effect sizes within a paper. A caveat is that conventions on what counts as experiment and what counts as conditions within an experiment might differ across papers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PerExpPaperMod &lt;-<span class="st"> </span><span class="kw">rma.mv</span>(g_calc, g_var_calc, <span class="dt">random =</span> <span class="op">~</span><span class="st"> </span><span class="kw">factor</span>(expt_num) <span class="op">|</span><span class="st">  </span>short_cite, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(PerExpPaperMod)</code></pre></div>
<pre><code>## 
## Multivariate Meta-Analysis Model (k = 295; method: REML)
## 
##    logLik   Deviance        AIC        BIC       AICc  
## -210.2505   420.5010   426.5010   437.5518   426.5838  
## 
## Variance Components: 
## 
## outer factor: short_cite       (nlvls = 66)
## inner factor: factor(expt_num) (nlvls = 15)
## 
##             estim    sqrt  fixed
## tau^2      0.0635  0.2521     no
## rho        0.2084             no
## 
## Test for Heterogeneity: 
## Q(df = 294) = 1161.6550, p-val &lt; .0001
## 
## Model Results:
## 
## estimate      se    zval    pval   ci.lb   ci.ub     
##   0.1839  0.0261  7.0577  &lt;.0001  0.1328  0.2349  ***
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>To summarize, all these models differ in their effect size estimates, but do not change the statistical outcome. The effect remains small but significantly above 0. Adding the level of experiment number did not dramatically change the result.</p>
</div>
</div>
<div id="moderator-model-from-the-paper" class="section level1">
<h1>Moderator Model from the Paper</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Centering mean age</span>
inworddb<span class="op">$</span>ageC &lt;-<span class="st"> </span>inworddb<span class="op">$</span>mean_age<span class="op">-</span><span class="kw">mean</span>(inworddb<span class="op">$</span>mean_age)

StandardMod &lt;-<span class="st"> </span><span class="kw">rma</span>(g_calc, g_var_calc, <span class="dt">mod =</span> ageC, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(StandardMod)</code></pre></div>
<pre><code>## 
## Mixed-Effects Model (k = 295; tau^2 estimator: REML)
## 
##    logLik   deviance        AIC        BIC       AICc  
## -144.8544   289.7088   295.7088   306.7493   295.7918  
## 
## tau^2 (estimated amount of residual heterogeneity):     0.1042 (SE = 0.0117)
## tau (square root of estimated tau^2 value):             0.3228
## I^2 (residual heterogeneity / unaccounted variability): 77.21%
## H^2 (unaccounted variability / sampling variability):   4.39
## R^2 (amount of heterogeneity accounted for):            0.00%
## 
## Test for Residual Heterogeneity: 
## QE(df = 293) = 1157.7341, p-val &lt; .0001
## 
## Test of Moderators (coefficient(s) 2): 
## QM(df = 1) = 0.3947, p-val = 0.5298
## 
## Model Results:
## 
##          estimate      se    zval    pval    ci.lb   ci.ub     
## intrcpt    0.2103  0.0221  9.5312  &lt;.0001   0.1670  0.2535  ***
## mods       0.0002  0.0003  0.6282  0.5298  -0.0004  0.0007     
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div id="two-level-model-paper-1" class="section level2">
<h2>Two Level Model: Paper</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PerPaperMod &lt;-<span class="st"> </span><span class="kw">rma.mv</span>(g_calc, g_var_calc, <span class="dt">mod =</span> ageC, <span class="dt">random =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>short_cite, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(PerPaperMod)</code></pre></div>
<pre><code>## 
## Multivariate Meta-Analysis Model (k = 295; method: REML)
## 
##    logLik   Deviance        AIC        BIC       AICc  
## -264.5964   529.1927   535.1927   546.2332   535.2758  
## 
## Variance Components: 
## 
##             estim    sqrt  nlvls  fixed      factor
## sigma^2    0.0400  0.2001     66     no  short_cite
## 
## Test for Residual Heterogeneity: 
## QE(df = 293) = 1157.7341, p-val &lt; .0001
## 
## Test of Moderators (coefficient(s) 2): 
## QM(df = 1) = 12.5408, p-val = 0.0004
## 
## Model Results:
## 
##          estimate      se    zval    pval   ci.lb   ci.ub     
## intrcpt    0.1790  0.0275  6.5052  &lt;.0001  0.1251  0.2330  ***
## mods       0.0008  0.0002  3.5413  0.0004  0.0003  0.0012  ***
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="three-level-model-paper-and-experiment-1" class="section level2">
<h2>Three Level Model: Paper and Experiment</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PerExpPaperMod &lt;-<span class="st"> </span><span class="kw">rma.mv</span>(g_calc, g_var_calc, <span class="dt">mod =</span> ageC, <span class="dt">random =</span> <span class="op">~</span><span class="st"> </span><span class="kw">factor</span>(expt_num) <span class="op">|</span><span class="st">  </span>short_cite, <span class="dt">data =</span> inworddb)
<span class="kw">summary</span>(PerExpPaperMod)</code></pre></div>
<pre><code>## 
## Multivariate Meta-Analysis Model (k = 295; method: REML)
## 
##    logLik   Deviance        AIC        BIC       AICc  
## -207.5961   415.1923   423.1923   437.9130   423.3312  
## 
## Variance Components: 
## 
## outer factor: short_cite       (nlvls = 66)
## inner factor: factor(expt_num) (nlvls = 15)
## 
##             estim    sqrt  fixed
## tau^2      0.0665  0.2579     no
## rho        0.2646             no
## 
## Test for Residual Heterogeneity: 
## QE(df = 293) = 1157.7341, p-val &lt; .0001
## 
## Test of Moderators (coefficient(s) 2): 
## QM(df = 1) = 5.8063, p-val = 0.0160
## 
## Model Results:
## 
##          estimate      se    zval    pval   ci.lb   ci.ub     
## intrcpt    0.1819  0.0273  6.6542  &lt;.0001  0.1283  0.2355  ***
## mods       0.0006  0.0003  2.4096  0.0160  0.0001  0.0011    *
## 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>To summarize, introducing hierarchical structure changed the outcome for the moderator test. Age (centered) now has a small, but significant, effect on effect sizes. This is not the case when ignoring the nested structure of effect sizes. This result mirrors the reported analyses in Bergmann &amp; Cristia (2015) that there is a small, positive effect of age when only considering papers which test at least two age groups in the same set-up.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
